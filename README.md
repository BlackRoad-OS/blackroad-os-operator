# Prism Console (Gen-0)

Prism Console is the single-pane-of-glass for every BlackRoad environment. This Gen-0 scaffold ships a minimal Next.js 14 app router shell with dark theming, stubbed data providers, and ready-to-extend UI components.

## Getting Started

```bash
pnpm install
pnpm dev
```

Visit http://localhost:3000 to view the console.

### Tests & linting

```bash
pnpm lint
pnpm test
```

### Production build

```bash
pnpm build
pnpm start
```

Docker image:

```bash
docker build -f infra/Dockerfile -t blackroad/prism-console:0.0.1 .
docker run -e PORT=3000 -p 3000:3000 blackroad/prism-console:0.0.1
```

## Internal HTTP API
All routes are prefixed with `/internal`:

- `GET /internal/health` – runtime health including worker status and queue stats
- `GET /internal/version` – build metadata (service, version, git SHA, uptime)
- `GET /internal/agents` – list registered agents (supports `status` and `q` filters)
- `GET /internal/agents/:id` – fetch a single agent
- `POST /internal/jobs` – enqueue a job `{ type, agentId?, input? }`
- `GET /internal/jobs/:id` – fetch job status
- `GET /internal/events` – recent domain events (optional `limit`)

## Architecture
- **Express app** defined in `src/app.ts` wires middleware and routes.
- **Config** in `src/config.ts` reads typed settings from the environment.
- **AgentRegistry** (`src/runtime/agentRegistry.ts`) hosts agents with metadata/state.
- **Job queue + worker** (`src/runtime/jobQueue.ts`, `src/runtime/worker.ts`) handle job lifecycle and dispatch.
- **Event bus** (`src/events/eventBus.ts`) emits and buffers recent events.
- **Journal store** (`src/integrations/journalStore.ts`) currently uses an in-memory implementation.

See `docs/OPERATOR_RUNTIME_OVERVIEW.md` for a brief runtime walkthrough.
## Environment

Configuration is read from standard environment variables such as `BEACON_URL` and `CORE_HUB`. See `infra/prisma-console.env.example` for a starter file.

---

Generated by Prism-Gen-0 scaffold. Extend with real BEACON and CORE_HUB integrations before release.
