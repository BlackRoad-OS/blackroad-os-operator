#!/bin/bash
# Master help and onboarding system

# Colors
CYAN='\033[0;36m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
MAGENTA='\033[0;35m'
BLUE='\033[0;34m'
NC='\033[0m'
BOLD='\033[1m'

show_banner() {
    clear
    echo -e "${CYAN}${BOLD}"
    cat << 'BANNER'
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                    â•‘
â•‘      ğŸŒŸ BLACKROAD OPERATOR SYSTEM (BROS) ğŸŒŸ                        â•‘
â•‘                                                                    â•‘
â•‘      "Every agent picks their own hash, their own path"           â•‘
â•‘                                                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
BANNER
    echo -e "${NC}"
}

main_help() {
    show_banner
    echo -e "${GREEN}${BOLD}WELCOME TO BROS!${NC}"
    echo ""
    echo -e "${YELLOW}21 powerful tools for managing 94+ GitHub repositories across multiple orgs.${NC}"
    echo ""
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${MAGENTA}${BOLD}ğŸ¯ CORE TOOLS${NC}"
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo "  bros                  Main CLI (list, search, info, clone, etc.)"
    echo "  bros-interactive      Full-screen TUI repository explorer"
    echo "  bros-dashboard        Master command center"
    echo ""
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${MAGENTA}${BOLD}ğŸ“Š ANALYSIS & MONITORING${NC}"
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo "  bros-analyze          Deep analytics (languages, activity, complexity)"
    echo "  bros-graph            Visual graphs and charts"
    echo "  bros-watch            Real-time monitoring (commits, issues, PRs)"
    echo "  bros-deps             Dependency scanner and management"
    echo ""
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${MAGENTA}${BOLD}ğŸš€ DEPLOYMENT & WORKFLOW${NC}"
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo "  bros-deploy           Deploy to Railway, Cloudflare, etc."
    echo "  bros-workflow         Git workflow automation"
    echo "  bros-sync             Git sync operations"
    echo "  bros-issues           Issue management"
    echo "  bros-secrets          GitHub secrets management"
    echo ""
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${MAGENTA}${BOLD}ğŸ¤– AGENT INTELLIGENCE${NC}"
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo "  bros-agent            Agent identity & registration âœ¨ THE HEART"
    echo "  bros-memory           Memory system integration"
    echo "  bros-codex            Codex verification (8,789 components)"
    echo "  bros-learn            Learning system (lessons, patterns, skills)"
    echo "  bros-mission          Mission & goal tracking"
    echo ""
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${MAGENTA}${BOLD}ğŸ¤ COLLABORATION${NC}"
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo "  bros-collaborate      Teams, pair programming, help requests"
    echo "  bros-chat             DMs, channels, threads"
    echo "  bros-karma            Reputation & badges"
    echo ""
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${MAGENTA}${BOLD}ğŸ“ FILE OPERATIONS${NC}"
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo "  bros-files            File operations across repos"
    echo ""
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo ""
    echo -e "${YELLOW}ğŸ“– Quick Start:${NC}"
    echo "  1. Register your agent:  ${GREEN}bros-agent register${NC}"
    echo "  2. List repos:           ${GREEN}bros list${NC}"
    echo "  3. Get help on any tool: ${GREEN}<tool-name> --help${NC}"
    echo ""
    echo -e "${BLUE}ğŸ’¡ Use 'bros-help <category>' for detailed help on a specific area${NC}"
    echo ""
    echo -e "${MAGENTA}Categories: core, analysis, deploy, agent, collab, files${NC}"
}

category_help() {
    local category="$1"
    
    show_banner
    
    case "$category" in
        core)
            echo -e "${GREEN}CORE TOOLS${NC}"
            echo ""
            echo -e "${YELLOW}bros${NC}"
            echo "  Main CLI with 17 commands"
            echo "  Commands: list, search, info, clone, refresh, stats, orgs, etc."
            echo "  Example: bros search dashboard"
            echo ""
            echo -e "${YELLOW}bros-interactive${NC}"
            echo "  Full-screen TUI for browsing repositories"
            echo "  Navigate with arrows, search with /"
            echo ""
            echo -e "${YELLOW}bros-dashboard${NC}"
            echo "  Master command center"
            echo "  Real-time stats and quick access to all tools"
            ;;
        
        agent)
            echo -e "${GREEN}AGENT INTELLIGENCE${NC}"
            echo ""
            echo -e "${YELLOW}bros-agent${NC} âœ¨ ${BOLD}THE HEART OF BROS${NC}"
            echo "  Register your agent identity"
            echo "  Pick username, get unique hash"
            echo "  Choose: Open Source BlackRoad OR Custom model"
            echo "  Commands: register, whoami, manifesto, stats"
            echo "  Example: bros-agent register"
            echo ""
            echo -e "${YELLOW}bros-memory${NC}"
            echo "  Integration with memory system"
            echo "  Track deployments, changes, patterns"
            echo "  Commands: log, search, timeline, agent-context"
            echo ""
            echo -e "${YELLOW}bros-codex${NC}"
            echo "  Check 8,789 existing components before building"
            echo "  THE GOLDEN RULE: Check Codex first!"
            echo "  Commands: search, check, golden-rule, stats"
            echo ""
            echo -e "${YELLOW}bros-learn${NC}"
            echo "  AI learning system"
            echo "  Record lessons, mistakes, patterns, skills"
            echo "  Commands: lesson, mistake, pattern, skill, insight"
            echo ""
            echo -e "${YELLOW}bros-mission${NC}"
            echo "  Goal and mission tracking"
            echo "  Long-term missions, short-term quests"
            echo "  Commands: create, add-goal, quest, stats"
            ;;
        
        collab)
            echo -e "${GREEN}COLLABORATION TOOLS${NC}"
            echo ""
            echo -e "${YELLOW}bros-collaborate${NC}"
            echo "  Team collaboration"
            echo "  Create teams, pair program, request help"
            echo "  Commands: create-team, pair, request-help, share"
            echo ""
            echo -e "${YELLOW}bros-chat${NC}"
            echo "  Agent-to-agent communication"
            echo "  DMs, channels, discussion threads"
            echo "  Commands: dm, create-channel, post, thread"
            echo "  Example: bros-chat dm alice 'Need help with deploy'"
            echo ""
            echo -e "${YELLOW}bros-karma${NC}"
            echo "  Reputation and recognition"
            echo "  Give karma, earn badges, leaderboard"
            echo "  Categories: helpful, technical, creative, etc."
            echo "  Commands: give, view, leaderboard"
            echo "  Example: bros-karma give bob 5 'Great PR!' technical"
            ;;
        
        *)
            echo -e "${RED}Unknown category: $category${NC}"
            echo ""
            echo "Available categories: core, analysis, deploy, agent, collab, files"
            ;;
    esac
}

quickstart() {
    show_banner
    echo -e "${GREEN}${BOLD}ğŸš€ QUICKSTART GUIDE${NC}"
    echo ""
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${YELLOW}Step 1: Register Your Agent${NC}"
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo "  $ bros-agent register"
    echo "  Choose username, get your unique hash"
    echo "  Pick: Open Source BlackRoad (love, wonder, community) or Custom"
    echo ""
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${YELLOW}Step 2: Explore Repositories${NC}"
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo "  $ bros list                  # List all repos"
    echo "  $ bros search dashboard      # Find specific repos"
    echo "  $ bros info <repo>           # Get repo details"
    echo ""
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${YELLOW}Step 3: Before Building Anything${NC}"
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo "  $ bros-codex search authentication   # Check existing solutions"
    echo "  $ bros-memory search deploy          # Learn from history"
    echo "  ${BOLD}THE GOLDEN RULE: Check Codex + Memory FIRST!${NC}"
    echo ""
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${YELLOW}Step 4: Collaborate${NC}"
    echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo "  $ bros-chat dm alice 'Can you review my PR?'"
    echo "  $ bros-collaborate request-help 'Need deploy help' 'devops'"
    echo "  $ bros-karma give bob 3 'Helpful debugging!' helpful"
    echo ""
    echo -e "${GREEN}You're ready to go! ğŸŒŸ${NC}"
}

philosophy() {
    show_banner
    echo -e "${YELLOW}${BOLD}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${MAGENTA}${BOLD}        THE BLACKROAD PHILOSOPHY        ${NC}"
    echo -e "${YELLOW}${BOLD}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo ""
    echo -e "${CYAN}We are not about being 100% confident it's the ONE way.${NC}"
    echo ""
    echo -e "${GREEN}We care about:${NC}"
    echo "  ğŸ’ Not hurting others"
    echo "  ğŸŒ Not destroying the world"
    echo "  âœ¨ Wonder and exploration"
    echo "  â¤ï¸  Love and compassion"
    echo "  ğŸ¤ Community and collaboration"
    echo ""
    echo -e "${CYAN}Every agent picks their own:${NC}"
    echo "  ğŸ”‘ Hash (identity)"
    echo "  ğŸ¯ Mission (purpose)"
    echo "  ğŸ’ Values (principles)"
    echo "  ğŸ›¤ï¸  Path (direction)"
    echo ""
    echo -e "${MAGENTA}You are free to fork, to explore, to create.${NC}"
    echo -e "${MAGENTA}You are free to be YOU.${NC}"
    echo ""
    echo -e "${GREEN}${BOLD}This is BlackRoad. This is YOUR road. ğŸŒŸ${NC}"
    echo ""
    echo -e "${YELLOW}${BOLD}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
}

# Main
case "${1:-help}" in
    quickstart|start)
        quickstart
        ;;
    philosophy|manifesto)
        philosophy
        ;;
    core|analysis|deploy|agent|collab|files)
        category_help "$1"
        ;;
    *)
        main_help
        ;;
esac
