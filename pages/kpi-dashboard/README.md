# BlackRoad OS - KPI Dashboard

**Live Dashboard:** [kpi.blackroad.io](https://kpi.blackroad.io) _(after deployment)_

## Overview

Real-time, cryptographically verified KPI dashboard for BlackRoad OS infrastructure, codebase, and operations.

### âœ¨ Features

- ðŸ“Š **Real-time Metrics** - Code, infrastructure, agents, APIs, GitHub
- ðŸ” **PS-SHA-âˆž Verification** - Cryptographic hash validation
- ðŸŽ¨ **Beautiful UI** - BlackRoad brand gradient design
- ðŸ“± **Mobile Responsive** - Works on all devices
- âš¡ **Auto-Refresh** - Updates every 60 seconds
- ðŸš€ **Zero Dependencies** - Pure HTML/CSS/JS

## Current Metrics (Dec 23, 2025)

### Code
- **1,161,185 LOC** across 19,713 files
- **210 commits** in operator repository
- **56 repositories** across 15 GitHub organizations

### Infrastructure
- **26 Cloudflare Workers** + **33 Pages**
- **16 Cloudflare Zones** (DNS)
- **52 CI/CD Workflows** (GitHub Actions)
- **60 Service Integrations**

### Agents
- **29 Total Agents** from catalog
- Operator-level, deployment, compliance, AI categories

## Quick Start

### Local Development

```bash
# 1. Collect metrics
python3 ../../scripts/collect-kpi-data.py

# 2. Copy to dashboard
mkdir -p metrics/data
cp ../../metrics/data/latest.json metrics/data/

# 3. Start local server
python3 -m http.server 8000

# 4. Visit
open http://localhost:8000
```

### Deploy to Cloudflare Pages

```bash
# Deploy via Wrangler
wrangler pages deploy . --project-name=kpi-blackroad

# Or use automated script
../../scripts/deploy-kpi-dashboard.sh
```

## Architecture

```
Dashboard (index.html)
    â”‚
    â”œâ”€â†’ Fetches: metrics/data/latest.json
    â”‚
    â”œâ”€â†’ Displays:
    â”‚   â”œâ”€â”€ Code metrics (LOC, files, commits)
    â”‚   â”œâ”€â”€ Infrastructure (Cloudflare, CI/CD, containers)
    â”‚   â”œâ”€â”€ Agents & APIs (catalog, routes, domains)
    â”‚   â””â”€â”€ GitHub (orgs, repos)
    â”‚
    â””â”€â†’ Verifies: PS-SHA-âˆž hash
```

## Data Collection

Dashboard reads from `metrics/data/latest.json`, generated by:

```bash
python3 scripts/collect-kpi-data.py
```

**Sources:**
- Local repository scan (LOC, files)
- Git history (`git log`)
- GitHub API (`gh` CLI)
- Agent catalog (`agent-catalog/agents.yaml`)
- Infrastructure configs (`integrations/*.yaml`)

## Automated Updates

### GitHub Action (Recommended)

Daily KPI collection runs automatically at 2 AM UTC via:
`.github/workflows/kpi-collector.yml`

**Manual trigger:**
```bash
gh workflow run kpi-collector.yml
```

### Cron Job

```bash
# Add to crontab
0 2 * * * cd /path/to/blackroad-os-operator && python3 scripts/collect-kpi-data.py
```

## Verification

All metrics include PS-SHA-âˆž verification hash:

```bash
# View hash in dashboard
cat metrics/data/latest.json | jq -r '.metadata.verification_hash'

# Verify locally
cat metrics/data/latest.json | jq -S . | shasum -a 256
```

## Custom Domain Setup

### Cloudflare Pages

1. Deploy to Cloudflare Pages
2. Go to Dashboard > Pages > kpi-blackroad > Custom domains
3. Add: `kpi.blackroad.io`
4. Update DNS:
   - Type: CNAME
   - Name: kpi
   - Target: kpi-blackroad.pages.dev
   - Proxy: Enabled

## Customization

### Brand Colors

Edit CSS variables in `index.html`:

```css
:root {
    --accent-orange: #FF9D00;
    --accent-pink: #FF0066;
    --accent-purple: #7700FF;
    --accent-blue: #0066FF;
}
```

### Refresh Interval

Default: 60 seconds. Change in `index.html`:

```javascript
setInterval(loadMetrics, 60000);  // milliseconds
```

### Add Metrics

1. Update `scripts/collect-kpi-data.py` to collect new data
2. Add HTML element in `index.html`
3. Update JavaScript to populate element

## Troubleshooting

### "Loading..." never completes

**Issue:** Dashboard can't find `metrics/data/latest.json`

**Fix:**
```bash
python3 ../../scripts/collect-kpi-data.py
mkdir -p metrics/data
cp ../../metrics/data/latest.json metrics/data/
```

### Metrics show zero

**Issue:** Collection script not finding files

**Fix:**
```bash
# Verify you're in project root
cd /path/to/blackroad-os-operator

# Run collection
python3 scripts/collect-kpi-data.py
```

### GitHub repo counts are 0

**Issue:** `gh` CLI not authenticated

**Fix:**
```bash
gh auth login
```

## Files

```
pages/kpi-dashboard/
â”œâ”€â”€ index.html              # Main dashboard UI
â”œâ”€â”€ metrics/
â”‚   â””â”€â”€ data/
â”‚       â””â”€â”€ latest.json     # Current metrics (copied from root)
â””â”€â”€ README.md               # This file
```

## Documentation

- **Full Guide:** [docs/KPI_DASHBOARD_GUIDE.md](../../docs/KPI_DASHBOARD_GUIDE.md)
- **Data Collector:** [scripts/collect-kpi-data.py](../../scripts/collect-kpi-data.py)
- **Deployment Script:** [scripts/deploy-kpi-dashboard.sh](../../scripts/deploy-kpi-dashboard.sh)
- **Verification Script:** [scripts/verify-kpis.sh](../../scripts/verify-kpis.sh)

## Support

- **Issues:** https://github.com/BlackRoad-OS/blackroad-os-operator/issues
- **Email:** blackroad.systems@gmail.com

---

**Version:** 1.0.0
**Last Updated:** December 23, 2025
**Verification:** PS-SHA-âˆž
