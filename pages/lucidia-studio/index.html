<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lucidia Studio | Creative Workspace</title>
  <meta name="description" content="AI-powered creative workspace. Design, code, and deploy with ambient intelligence.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%238855FF'/></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Inter+Tight:wght@600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --studio-violet: #8855FF;
      --studio-pink: #FF55AA;
      --studio-cyan: #00CCFF;
      --br-black: #0a0a0a;
      --br-surface: #111111;
      --br-surface-2: #1a1a1a;
      --br-surface-3: #222222;
      --br-border: #2a2a2a;
      --br-white: #FFFFFF;
      --br-text-muted: #888888;
      --br-gradient-studio: linear-gradient(135deg, #8855FF 0%, #FF55AA 50%, #00CCFF 100%);
      --br-font-display: 'Inter Tight', sans-serif;
      --br-font-body: 'Inter', sans-serif;
      --br-font-mono: 'JetBrains Mono', monospace;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; overflow: hidden; }
    body {
      background: var(--br-black);
      color: var(--br-white);
      font-family: var(--br-font-body);
      display: flex;
      flex-direction: column;
    }

    /* Header */
    header {
      height: 48px;
      background: var(--br-surface);
      border-bottom: 1px solid var(--br-border);
      display: flex;
      align-items: center;
      padding: 0 1rem;
      gap: 1rem;
      flex-shrink: 0;
    }
    .logo {
      font-family: var(--br-font-display);
      font-size: 1rem;
      font-weight: 700;
      background: var(--br-gradient-studio);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .toolbar {
      display: flex;
      gap: 0.25rem;
      padding: 0 0.5rem;
      border-left: 1px solid var(--br-border);
      border-right: 1px solid var(--br-border);
    }
    .tool-btn {
      width: 32px;
      height: 32px;
      background: transparent;
      border: none;
      border-radius: 6px;
      color: var(--br-text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }
    .tool-btn:hover { background: var(--br-surface-2); color: var(--br-white); }
    .tool-btn.active { background: var(--studio-violet); color: var(--br-white); }
    .header-spacer { flex: 1; }
    .header-actions {
      display: flex;
      gap: 0.5rem;
    }
    .action-btn {
      padding: 0.375rem 0.75rem;
      background: var(--br-surface-2);
      border: 1px solid var(--br-border);
      border-radius: 6px;
      color: var(--br-text-muted);
      font-size: 0.75rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .action-btn:hover { border-color: var(--studio-violet); color: var(--br-white); }
    .action-btn.primary {
      background: var(--br-gradient-studio);
      border: none;
      color: var(--br-white);
    }

    /* Main Layout */
    .workspace {
      flex: 1;
      display: flex;
      overflow: hidden;
    }

    /* Left Panel - File Tree */
    .file-panel {
      width: 240px;
      background: var(--br-surface);
      border-right: 1px solid var(--br-border);
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
    }
    .panel-header {
      padding: 0.75rem 1rem;
      font-size: 0.6875rem;
      font-weight: 600;
      color: var(--br-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      border-bottom: 1px solid var(--br-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .panel-actions {
      display: flex;
      gap: 0.25rem;
    }
    .icon-btn {
      width: 20px;
      height: 20px;
      background: transparent;
      border: none;
      border-radius: 4px;
      color: var(--br-text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
    }
    .icon-btn:hover { background: var(--br-surface-2); color: var(--br-white); }
    .file-tree {
      flex: 1;
      overflow-y: auto;
      padding: 0.5rem;
    }
    .file-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.375rem 0.5rem;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.8125rem;
      transition: background 0.2s;
    }
    .file-item:hover { background: var(--br-surface-2); }
    .file-item.active { background: rgba(136, 85, 255, 0.15); }
    .file-icon { font-size: 0.875rem; }
    .file-name { flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .folder-children {
      margin-left: 1rem;
      border-left: 1px solid var(--br-border);
      padding-left: 0.5rem;
    }

    /* Editor Area */
    .editor-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-width: 0;
    }
    .tabs {
      display: flex;
      background: var(--br-surface);
      border-bottom: 1px solid var(--br-border);
      overflow-x: auto;
    }
    .tab {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.625rem 1rem;
      font-size: 0.8125rem;
      color: var(--br-text-muted);
      border-right: 1px solid var(--br-border);
      cursor: pointer;
      white-space: nowrap;
    }
    .tab:hover { background: var(--br-surface-2); }
    .tab.active {
      background: var(--br-black);
      color: var(--br-white);
      border-bottom: 2px solid var(--studio-violet);
    }
    .tab-close {
      width: 16px;
      height: 16px;
      background: transparent;
      border: none;
      border-radius: 4px;
      color: var(--br-text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
    }
    .tab-close:hover { background: var(--br-surface-2); color: var(--br-white); }

    .editor-content {
      flex: 1;
      display: flex;
      overflow: hidden;
    }
    .code-editor {
      flex: 1;
      background: var(--br-black);
      overflow: auto;
      position: relative;
    }
    .line-numbers {
      position: absolute;
      left: 0;
      top: 0;
      width: 50px;
      padding: 1rem 0.5rem;
      text-align: right;
      font-family: var(--br-font-mono);
      font-size: 0.8125rem;
      color: var(--br-text-muted);
      user-select: none;
      background: var(--br-surface);
      border-right: 1px solid var(--br-border);
    }
    .code-content {
      padding: 1rem 1rem 1rem 70px;
      font-family: var(--br-font-mono);
      font-size: 0.875rem;
      line-height: 1.6;
      white-space: pre;
      min-height: 100%;
    }
    .code-keyword { color: #FF79C6; }
    .code-string { color: #F1FA8C; }
    .code-comment { color: #6272A4; }
    .code-function { color: #50FA7B; }
    .code-type { color: #8BE9FD; }
    .code-number { color: #BD93F9; }

    /* AI Panel */
    .ai-panel {
      width: 320px;
      background: var(--br-surface);
      border-left: 1px solid var(--br-border);
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
    }
    .ai-header {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--br-border);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .ai-avatar {
      width: 28px;
      height: 28px;
      background: var(--br-gradient-studio);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.875rem;
    }
    .ai-title {
      font-size: 0.875rem;
      font-weight: 600;
    }
    .ai-status {
      font-size: 0.6875rem;
      color: var(--br-text-muted);
    }
    .ai-messages {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .ai-message {
      background: var(--br-surface-2);
      border-radius: 10px;
      padding: 0.75rem;
    }
    .ai-message.user {
      background: rgba(136, 85, 255, 0.1);
      margin-left: 1rem;
    }
    .ai-message-text {
      font-size: 0.8125rem;
      line-height: 1.5;
    }
    .ai-suggestion {
      background: var(--br-surface-2);
      border: 1px solid var(--br-border);
      border-radius: 8px;
      padding: 0.625rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .ai-suggestion:hover {
      border-color: var(--studio-violet);
    }
    .ai-suggestion-title {
      font-size: 0.75rem;
      font-weight: 500;
      margin-bottom: 0.25rem;
    }
    .ai-suggestion-text {
      font-size: 0.6875rem;
      color: var(--br-text-muted);
    }
    .ai-input-area {
      padding: 0.75rem;
      border-top: 1px solid var(--br-border);
    }
    .ai-input-wrapper {
      display: flex;
      gap: 0.5rem;
    }
    .ai-input {
      flex: 1;
      background: var(--br-black);
      border: 1px solid var(--br-border);
      border-radius: 8px;
      padding: 0.625rem 0.75rem;
      color: var(--br-white);
      font-size: 0.8125rem;
      font-family: var(--br-font-body);
    }
    .ai-input:focus {
      outline: none;
      border-color: var(--studio-violet);
    }
    .ai-send {
      width: 36px;
      height: 36px;
      background: var(--br-gradient-studio);
      border: none;
      border-radius: 8px;
      color: var(--br-white);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .ai-send:hover {
      box-shadow: 0 0 15px rgba(136, 85, 255, 0.4);
    }

    /* Bottom Panel */
    .bottom-panel {
      height: 200px;
      background: var(--br-surface);
      border-top: 1px solid var(--br-border);
      display: flex;
      flex-direction: column;
    }
    .bottom-tabs {
      display: flex;
      border-bottom: 1px solid var(--br-border);
    }
    .bottom-tab {
      padding: 0.5rem 1rem;
      font-size: 0.75rem;
      color: var(--br-text-muted);
      cursor: pointer;
      border-bottom: 2px solid transparent;
    }
    .bottom-tab:hover { color: var(--br-white); }
    .bottom-tab.active {
      color: var(--br-white);
      border-bottom-color: var(--studio-violet);
    }
    .terminal {
      flex: 1;
      padding: 0.75rem;
      font-family: var(--br-font-mono);
      font-size: 0.8125rem;
      overflow-y: auto;
    }
    .terminal-line {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 0.25rem;
    }
    .terminal-prompt { color: var(--studio-cyan); }
    .terminal-output { color: var(--br-text-muted); }
    .terminal-success { color: #00FF88; }
    .terminal-error { color: #FF5555; }

    /* Resizers */
    .resizer {
      width: 4px;
      cursor: col-resize;
      background: transparent;
      transition: background 0.2s;
    }
    .resizer:hover { background: var(--studio-violet); }

    @media (max-width: 1024px) {
      .ai-panel { display: none; }
    }
    @media (max-width: 768px) {
      .file-panel { display: none; }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">Lucidia Studio</div>
    <div class="toolbar">
      <button class="tool-btn" title="Select"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/></svg></button>
      <button class="tool-btn active" title="Code"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg></button>
      <button class="tool-btn" title="Design"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/></svg></button>
      <button class="tool-btn" title="Preview"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="2"/><path d="M22 12c-2.667 4.667-6 7-10 7s-7.333-2.333-10-7c2.667-4.667 6-7 10-7s7.333 2.333 10 7"/></svg></button>
    </div>
    <div class="header-spacer"></div>
    <div class="header-actions">
      <button class="action-btn" onclick="runBuild()">Build</button>
      <button class="action-btn primary" onclick="deploy()">Deploy</button>
    </div>
  </header>

  <div class="workspace">
    <aside class="file-panel">
      <div class="panel-header">
        <span>Explorer</span>
        <div class="panel-actions">
          <button class="icon-btn" title="New File">+</button>
          <button class="icon-btn" title="Refresh">‚Üª</button>
        </div>
      </div>
      <div class="file-tree" id="file-tree"></div>
    </aside>

    <div class="editor-area">
      <div class="tabs" id="tabs"></div>
      <div class="editor-content">
        <div class="code-editor">
          <div class="line-numbers" id="line-numbers"></div>
          <pre class="code-content" id="code-content" contenteditable="true" spellcheck="false"></pre>
        </div>
      </div>
    </div>

    <aside class="ai-panel">
      <div class="ai-header">
        <div class="ai-avatar">L</div>
        <div>
          <div class="ai-title">Lucidia</div>
          <div class="ai-status">Watching your code</div>
        </div>
      </div>
      <div class="ai-messages" id="ai-messages">
        <div class="ai-message">
          <div class="ai-message-text">I noticed you're working on a React component. Need help with hooks or state management?</div>
        </div>
        <div class="ai-suggestion" onclick="applySuggestion('optimize')">
          <div class="ai-suggestion-title">Optimize Performance</div>
          <div class="ai-suggestion-text">Add useMemo to prevent unnecessary re-renders</div>
        </div>
        <div class="ai-suggestion" onclick="applySuggestion('types')">
          <div class="ai-suggestion-title">Add TypeScript Types</div>
          <div class="ai-suggestion-text">Generate interface for component props</div>
        </div>
      </div>
      <div class="ai-input-area">
        <div class="ai-input-wrapper">
          <input class="ai-input" id="ai-input" placeholder="Ask Lucidia..." onkeydown="handleAiInput(event)">
          <button class="ai-send" onclick="sendAiMessage()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13"/>
            </svg>
          </button>
        </div>
      </div>
    </aside>
  </div>

  <div class="bottom-panel">
    <div class="bottom-tabs">
      <div class="bottom-tab active">Terminal</div>
      <div class="bottom-tab">Problems</div>
      <div class="bottom-tab">Output</div>
      <div class="bottom-tab">Debug</div>
    </div>
    <div class="terminal" id="terminal">
      <div class="terminal-line">
        <span class="terminal-prompt">~/project $</span>
        <span class="terminal-output">npm run dev</span>
      </div>
      <div class="terminal-line">
        <span class="terminal-success">‚úì Ready in 1.2s</span>
      </div>
      <div class="terminal-line">
        <span class="terminal-output">‚ûú Local: http://localhost:3000</span>
      </div>
    </div>
  </div>

  <script>
    // File structure
    const files = {
      'src': {
        type: 'folder',
        children: {
          'components': {
            type: 'folder',
            children: {
              'Button.tsx': { type: 'file', icon: 'üìÑ', content: `import React from 'react';

interface ButtonProps {
  children: React.ReactNode;
  variant?: 'primary' | 'secondary';
  onClick?: () => void;
}

export function Button({
  children,
  variant = 'primary',
  onClick
}: ButtonProps) {
  return (
    <button
      className={\`btn btn-\${variant}\`}
      onClick={onClick}
    >
      {children}
    </button>
  );
}` },
              'Card.tsx': { type: 'file', icon: 'üìÑ', content: `import React from 'react';

export function Card({ title, children }) {
  return (
    <div className="card">
      <h3>{title}</h3>
      {children}
    </div>
  );
}` }
            }
          },
          'App.tsx': { type: 'file', icon: '‚öõÔ∏è', content: `import { Button } from './components/Button';
import { Card } from './components/Card';

export default function App() {
  return (
    <main>
      <Card title="Welcome">
        <p>Build something amazing.</p>
        <Button onClick={() => console.log('clicked')}>
          Get Started
        </Button>
      </Card>
    </main>
  );
}` },
          'index.css': { type: 'file', icon: 'üé®', content: `:root {
  --primary: #8855FF;
  --bg: #0a0a0a;
  --text: #ffffff;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Inter', sans-serif;
}

.btn {
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  font-weight: 600;
}

.btn-primary {
  background: var(--primary);
  color: white;
}` }
        }
      },
      'package.json': { type: 'file', icon: 'üì¶', content: `{
  "name": "my-project",
  "version": "1.0.0",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "deploy": "blackroad deploy"
  }
}` },
      'README.md': { type: 'file', icon: 'üìù', content: `# My Project

Built with Lucidia Studio.

## Getting Started

\`\`\`bash
npm install
npm run dev
\`\`\`` }
    };

    let openTabs = [];
    let activeTab = null;

    // Render file tree
    function renderFileTree(structure, container, path = '') {
      Object.entries(structure).forEach(([name, item]) => {
        const fullPath = path ? `${path}/${name}` : name;
        const el = document.createElement('div');

        if (item.type === 'folder') {
          el.innerHTML = `
            <div class="file-item" onclick="toggleFolder(this)">
              <span class="file-icon">üìÅ</span>
              <span class="file-name">${name}</span>
            </div>
            <div class="folder-children" id="folder-${fullPath.replace(/\//g, '-')}"></div>
          `;
          container.appendChild(el);
          renderFileTree(item.children, el.querySelector('.folder-children'), fullPath);
        } else {
          el.className = 'file-item';
          el.setAttribute('data-path', fullPath);
          el.innerHTML = `
            <span class="file-icon">${item.icon || 'üìÑ'}</span>
            <span class="file-name">${name}</span>
          `;
          el.onclick = () => openFile(fullPath, item);
          container.appendChild(el);
        }
      });
    }

    function toggleFolder(el) {
      const children = el.nextElementSibling;
      children.style.display = children.style.display === 'none' ? 'block' : 'none';
      const icon = el.querySelector('.file-icon');
      icon.textContent = children.style.display === 'none' ? 'üìÅ' : 'üìÇ';
    }

    function openFile(path, file) {
      // Update file tree selection
      document.querySelectorAll('.file-item').forEach(el => el.classList.remove('active'));
      document.querySelector(`[data-path="${path}"]`)?.classList.add('active');

      // Add tab if not exists
      if (!openTabs.includes(path)) {
        openTabs.push(path);
      }
      activeTab = path;
      renderTabs();
      renderCode(file.content);
    }

    function renderTabs() {
      const container = document.getElementById('tabs');
      container.innerHTML = openTabs.map(path => {
        const name = path.split('/').pop();
        return `
          <div class="tab ${path === activeTab ? 'active' : ''}" onclick="switchTab('${path}')">
            <span>${name}</span>
            <button class="tab-close" onclick="closeTab('${path}', event)">√ó</button>
          </div>
        `;
      }).join('');
    }

    function switchTab(path) {
      activeTab = path;
      const file = getFileByPath(path);
      if (file) {
        renderCode(file.content);
      }
      renderTabs();
    }

    function closeTab(path, e) {
      e.stopPropagation();
      openTabs = openTabs.filter(p => p !== path);
      if (activeTab === path) {
        activeTab = openTabs[openTabs.length - 1] || null;
        if (activeTab) {
          const file = getFileByPath(activeTab);
          if (file) renderCode(file.content);
        }
      }
      renderTabs();
    }

    function getFileByPath(path) {
      const parts = path.split('/');
      let current = files;
      for (const part of parts) {
        if (current[part]) {
          current = current[part].children || current[part];
        } else {
          return null;
        }
      }
      return current;
    }

    function renderCode(content) {
      const lines = content.split('\n');
      document.getElementById('line-numbers').innerHTML = lines.map((_, i) => i + 1).join('<br>');

      // Basic syntax highlighting
      const highlighted = content
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/(\/\/.*$)/gm, '<span class="code-comment">$1</span>')
        .replace(/(".*?"|'.*?'|`.*?`)/g, '<span class="code-string">$1</span>')
        .replace(/\b(import|export|from|const|let|var|function|return|if|else|interface|type|async|await|default)\b/g, '<span class="code-keyword">$1</span>')
        .replace(/\b(React|useState|useEffect|useMemo)\b/g, '<span class="code-type">$1</span>')
        .replace(/\b(\d+)\b/g, '<span class="code-number">$1</span>');

      document.getElementById('code-content').innerHTML = highlighted;
    }

    // AI functionality
    function handleAiInput(e) {
      if (e.key === 'Enter') sendAiMessage();
    }

    function sendAiMessage() {
      const input = document.getElementById('ai-input');
      const text = input.value.trim();
      if (!text) return;

      const messages = document.getElementById('ai-messages');
      messages.innerHTML += `<div class="ai-message user"><div class="ai-message-text">${text}</div></div>`;
      input.value = '';

      setTimeout(() => {
        const responses = [
          "I can help with that. Let me analyze the code structure...",
          "Good question! Here's what I suggest based on your current file...",
          "I've detected a potential optimization. Would you like me to apply it?",
        ];
        messages.innerHTML += `<div class="ai-message"><div class="ai-message-text">${responses[Math.floor(Math.random() * responses.length)]}</div></div>`;
        messages.scrollTop = messages.scrollHeight;
      }, 1000);
    }

    function applySuggestion(type) {
      const messages = document.getElementById('ai-messages');
      messages.innerHTML += `<div class="ai-message"><div class="ai-message-text">Applying ${type} suggestion to your code...</div></div>`;
      addTerminalLine('Lucidia: Code updated with ' + type + ' improvements', 'success');
    }

    // Terminal
    function addTerminalLine(text, type = 'output') {
      const terminal = document.getElementById('terminal');
      terminal.innerHTML += `<div class="terminal-line"><span class="terminal-${type}">${text}</span></div>`;
      terminal.scrollTop = terminal.scrollHeight;
    }

    function runBuild() {
      addTerminalLine('~/project $ npm run build', 'output');
      setTimeout(() => addTerminalLine('Building...', 'output'), 300);
      setTimeout(() => addTerminalLine('‚úì Build complete in 2.4s', 'success'), 1500);
    }

    function deploy() {
      addTerminalLine('~/project $ blackroad deploy', 'output');
      setTimeout(() => addTerminalLine('Deploying to BlackRoad Network...', 'output'), 300);
      setTimeout(() => addTerminalLine('‚úì Deployed to https://my-project.blackroad.io', 'success'), 2000);
    }

    // Initialize
    renderFileTree(files, document.getElementById('file-tree'));
    openFile('src/App.tsx', files.src.children['App.tsx']);
  </script>
</body>
</html>
