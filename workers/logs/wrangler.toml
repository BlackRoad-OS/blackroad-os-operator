name = "blackroad-logs"
main = "src/index.ts"
compatibility_date = "2024-12-02"
compatibility_flags = ["nodejs_compat"]

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "blackroad-logs"
database_id = "2bea6826-d4cb-4877-8d78-aa7a8fd3c1b0"

# CORS settings for API access
[vars]
ALLOWED_ORIGINS = "*"
MAX_LOG_RETENTION_DAYS = "90"

# Triggers
[triggers]
crons = ["0 0 * * *"]  # Daily cleanup of old logs
